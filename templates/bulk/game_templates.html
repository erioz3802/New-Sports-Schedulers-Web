<!-- templates/bulk/game_templates.html -->
{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2><i class="bi bi-file-earmark-excel me-2"></i>Download Game Templates</h2>
                <a href="{{ url_for('bulk.dashboard') }}" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left me-1"></i>Back to Dashboard
                </a>
            </div>

            <!-- Template Selection -->
            <div class="row">
                <!-- Games Only Template -->
                <div class="col-lg-6">
                    <div class="card border-success h-100">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0"><i class="bi bi-calendar-event me-2"></i>Games Only Template</h5>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <p class="card-text">
                                Perfect for scheduling games without assigning officials immediately. 
                                You can assign officials later using the game management interface.
                            </p>
                            
                            <h6>What's Included:</h6>
                            <ul class="small mb-3">
                                <li><strong>League Dropdown:</strong> Your {{ league_count }} accessible leagues</li>
                                <li><strong>Location Dropdown:</strong> All {{ location_count }} available locations</li>
                                <li><strong>Date/Time Validation:</strong> Prevents past dates and invalid formats</li>
                                <li><strong>Team Information:</strong> Home/away team fields</li>
                                <li><strong>Game Details:</strong> Level, field, notes, and instructions</li>
                            </ul>

                            <h6>Best For:</h6>
                            <ul class="small mb-4">
                                <li>Initial schedule creation</li>
                                <li>When officials aren't determined yet</li>
                                <li>Quick game entry without assignments</li>
                                <li>Leagues with separate assignment process</li>
                            </ul>

                            <div class="mt-auto">
                                <a href="{{ url_for('bulk.download_game_template', type='games_only') }}" 
                                   class="btn btn-success btn-lg w-100">
                                    <i class="bi bi-download me-2"></i>Download Games Template
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Games with Assignments Template -->
                <div class="col-lg-6">
                    <div class="card border-info h-100">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0"><i class="bi bi-people-fill me-2"></i>Games with Assignments Template</h5>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <p class="card-text">
                                Complete solution for scheduling games and assigning officials 
                                in one upload. Perfect for recurring schedules with known officials.
                            </p>
                            
                            <h6>What's Included:</h6>
                            <ul class="small mb-3">
                                <li><strong>All Games Template Features</strong> PLUS:</li>
                                <li><strong>Officials Dropdown:</strong> Your {{ official_count }} available officials</li>
                                <li><strong>Position Fields:</strong> Referee, Umpire, Line Judge, etc.</li>
                                <li><strong>Multiple Officials:</strong> Up to 3 officials per game</li>
                                <li><strong>Conflict Detection:</strong> Automatic double-booking prevention</li>
                            </ul>

                            <h6>Best For:</h6>
                            <ul class="small mb-4">
                                <li>Complete schedule with known officials</li>
                                <li>Recurring leagues with regular officials</li>
                                <li>Tournament scheduling</li>
                                <li>Season-long scheduling</li>
                            </ul>

                            <div class="mt-auto">
                                <a href="{{ url_for('bulk.download_game_template', type='with_assignments') }}" 
                                   class="btn btn-info btn-lg w-100">
                                    <i class="bi bi-download me-2"></i>Download Assignment Template
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Important Information -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="alert alert-warning">
                        <h6><i class="bi bi-exclamation-triangle me-2"></i>Important Before Downloading:</h6>
                        <div class="row">
                            <div class="col-md-4">
                                <h6>Check Your Data:</h6>
                                <ul class="mb-0">
                                    <li>Verify all needed <a href="{{ url_for('league.manage_leagues') }}">leagues exist</a></li>
                                    <li>Add missing <a href="{{ url_for('league.manage_locations') }}">locations first</a></li>
                                    <li>Confirm <a href="{{ url_for('admin.manage_users') }}">official accounts</a></li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6>Template Tips:</h6>
                                <ul class="mb-0">
                                    <li>Always download fresh templates</li>
                                    <li>Use Excel dropdown menus only</li>
                                    <li>Don't manually type names</li>
                                    <li>Follow date/time formats exactly</li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6>File Requirements:</h6>
                                <ul class="mb-0">
                                    <li>Excel format (.xlsx or .xls)</li>
                                    <li>Maximum file size: 16MB</li>
                                    <li>Keep template structure intact</li>
                                    <li>Delete sample rows before upload</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="row mt-3">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h6>Quick Actions</h6>
                        </div>
                        <div class="card-body">
                            <div class="btn-group" role="group">
                                <a href="{{ url_for('league.add_location') }}" class="btn btn-outline-primary">
                                    <i class="bi bi-geo-alt-fill me-1"></i>Add Location
                                </a>
                                <a href="{{ url_for('admin.add_user') }}" class="btn btn-outline-success">
                                    <i class="bi bi-person-plus me-1"></i>Add Official
                                </a>
                                <a href="{{ url_for('bulk.upload_games') }}" class="btn btn-outline-info">
                                    <i class="bi bi-upload me-1"></i>Upload Games
                                </a>
                                <a href="{{ url_for('bulk.help_page') }}" class="btn btn-outline-secondary">
                                    <i class="bi bi-question-circle me-1"></i>Help
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
